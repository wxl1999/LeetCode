# 395. 至少有 K 个重复字符的最长子串

[题目链接](https://leetcode.cn/problems/longest-substring-with-at-least-k-repeating-characters/description/)

## 解法一：滑动窗口

### 思路

- 难点在于何时决定收缩子串
- 将问题分解为字符种类为 m 的情况下，每一字符出现次数都不少于 k
  - 这样子串字符种类超过时，就可以收缩子串

### 代码

```py
class Solution:
    def longestSubstring(self, s: str, k: int) -> int:
        ans = 0
        n = len(s)
        counter = Counter(s)
        max_c_num = sum(v >= k for v in counter.values())
        for i in range(1, max_c_num + 1):
            d = defaultdict(int)
            c_num = 0
            valid_c_num = 0
            l, r = 0, 0
            while r < n:
                if d[s[r]] == 0:
                    c_num += 1
                d[s[r]] += 1
                if d[s[r]] == k:
                    valid_c_num += 1
                while c_num > i:
                    if d[s[l]] == k:
                        valid_c_num -= 1
                    d[s[l]] -= 1
                    if d[s[l]] == 0:
                        c_num -= 1
                    l += 1

                r += 1
                if valid_c_num == i:
                    ans = max(ans, r - l)

        return ans
```

### 复杂度

- 时间：O(26 n)
- 空间：O(n)
