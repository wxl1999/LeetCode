# 698. 划分为k个相等的子集

[题目链接](https://leetcode.cn/problems/partition-to-k-equal-sum-subsets/description/)

## 思路

- 把数组分成K个和相等的桶
- 挨个装桶，如果满了就换下一个桶
  - 从 0 开始重新累加
  - 如果溢出，那么不可行，结合排序的话说明没有符合要求的
- 最终目标：所有数都被使用
  - 需要维护使用过哪些数
  - 使用状态压缩：二进制为 1 表示没有用过，0表示用过

## 代码

```py
class Solution:
    def canPartitionKSubsets(self, nums: List[int], k: int) -> bool:
        s = sum(nums)
        if s % k:
            return False
        target = s // k
        nums.sort()
        if nums[-1] > target:
            return False
        n = len(nums)

        @cache
        def dfs(st, cur):
            if st == 0:
                return True

            for i in range(n):
                if cur + nums[i] > target:
                    break

                if (st >> i) & 1 and dfs(st ^ (1 << i), (cur + nums[i]) % target):
                    return True
                    
            return False

        return dfs((1 << n) - 1, 0)
```

### 复杂度

- 时间：O(n*2^n)
- 空间：O(2^n)
