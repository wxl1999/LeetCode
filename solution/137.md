# 137. 只出现一次的数字 II

[题目链接](https://leetcode.cn/problems/single-number-ii/description)

## 解法一：快速选择

### 思路

- 每次将数组划分为 <= x 和 > x 两部分
- 如果有一侧长度为 3 的倍数 + 1，说明答案在这一侧，可以舍弃另外一侧

### 代码

```py
class Solution:
    def singleNumber(self, nums: List[int]) -> int:
        n = len(nums)

        def quickselect(l, r):
            if l >= r:
                return nums[l]

            x = nums[random.randint(l, r)]

            i = l - 1
            j = r + 1
            while i < j:
                i += 1
                while i <= r and nums[i] <= x:
                    i += 1
                j -= 1
                while j >= l and nums[j] > x:
                    j -= 1
                if i < j:
                    nums[i], nums[j] = nums[j], nums[i]

            if (j - l + 1) % 3 == 1:
                return quickselect(l, j)
            else:
                return quickselect(j + 1, r)

        return quickselect(0, n - 1)
```

### 复杂度

- 时间：O(n)
- 空间：O(logn)
