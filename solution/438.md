# 438. 找到字符串中所有字母异位词

[题目链接](https://leetcode.cn/problems/find-all-anagrams-in-a-string/description/)

## 解法一：滑动窗口 + 哈希表

### 思路

- 维护每次窗口进入元素、弹出元素时两个哈希表的差异

### 代码

```py
class Solution:
    def findAnagrams(self, s: str, p: str) -> List[int]:
        ans = []

        d_p = Counter(p)
        d_s = defaultdict(int)
        diff_cnt = len(d_p)

        n_s = len(s)
        n_p = len(p)
        for r in range(n_s):
            d_s[s[r]] += 1
            if d_s[s[r]] == d_p[s[r]]:
                diff_cnt -= 1
            elif d_s[s[r]] == d_p[s[r]] + 1:
                diff_cnt += 1

            l = r - n_p + 1
            if l < 0:
                continue

            if diff_cnt == 0:
                ans.append(l)
            
            d_s[s[l]] -= 1
            if d_s[s[l]] == d_p[s[l]]:
                diff_cnt -= 1
            elif d_s[s[l]] == d_p[s[l]] - 1:
                diff_cnt += 1

        return ans
```

### 复杂度

- 时间：O(n)
- 空间：O(n)
