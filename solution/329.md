# 329. 矩阵中的最长递增路径

[题目链接](https://leetcode.cn/problems/longest-increasing-path-in-a-matrix/description/)

## 方法一：拓扑排序

### 思路

- 先找到入度为 0，即比周围都大的单元格，然后遍历，将相邻值更小的单元格入度减一
- 遍历的层数即为最大路径长度

### 代码

```py
class Solution:
    def longestIncreasingPath(self, matrix: List[List[int]]) -> int:
        ans = 0

        m, n = len(matrix), len(matrix[0])
        d_list = [[-1, 0], [0, 1], [1, 0], [0, -1]]

        d = [[0 for _ in range(n)] for _ in range(m)]
        q = deque()

        for i in range(m):
            for j in range(n):
                for di, dj in d_list:
                    ni = i + di
                    nj = j + dj
                    if 0 <= ni < m and 0 <= nj < n and matrix[ni][nj] > matrix[i][j]:
                        d[i][j] += 1
                if d[i][j] == 0:
                    q.append((i, j))

        while q:
            ans += 1
            cnt = len(q)
            for _ in range(cnt):
                i, j = q.popleft()
                for di, dj in d_list:
                    ni, nj = i + di, j + dj
                    if 0 <= ni < m and 0 <= nj < n and matrix[ni][nj] < matrix[i][j]:
                        d[ni][nj] -= 1
                        if d[ni][nj] == 0:
                            q.append((ni, nj))

        return ans
```

### 复杂度

- 时间：O(mn)
- 空间：O(mn)
